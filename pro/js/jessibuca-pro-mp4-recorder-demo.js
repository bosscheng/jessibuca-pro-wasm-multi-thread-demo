!function(r){"function"==typeof define&&define.amd?define(r):r()}(function(){"use strict";var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function t(r,e){return r(e={exports:{}},e.exports),e.exports}var n=Object.freeze({__proto__:null,commonjsGlobal:r,commonjsRequire:function(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")},unwrapExports:e,createCommonjsModule:t,getCjsExportFromNamespace:function(r){return r&&r.default||r}});function o(r,e){var t=i();return(o=function(r,e){return t[r-=423]})(r,e)}var a=o;function i(){var r=["143582WhfFkk","26634lcfSLa","1671780QlxuTb","createCommonjsModule","3390gkujXF","38169MfteDX","1043JnfawA","exports","3000BkePkQ","68123aSufRd","Cannot call a class as a function","6UDwioZ","632039dMutHP","5405770GtybQz"];return(i=function(){return r})()}!function(r){for(var e=o,t=r();;)try{if(995711===parseInt(e(424))/1+parseInt(e(426))/2*(-parseInt(e(423))/3)+parseInt(e(428))/4+-parseInt(e(425))/5+parseInt(e(427))/6*(parseInt(e(432))/7)+-parseInt(e(434))/8*(parseInt(e(431))/9)+parseInt(e(430))/10*(parseInt(e(435))/11))break;t.push(t.shift())}catch(r){t.push(t.shift())}}(i);var s=e(n[a(429)](function(r){var e=a;r[e(433)]=function(r,e){if(!(r instanceof e))throw new TypeError(o(436))},r[e(433)].__esModule=!0,r[e(433)].default=r[e(433)]})),u=p;function c(){var r=["27fWhQks","7284663ZTQnvc","length","createCommonjsModule","1854364CBRxRV","7sALXEu","key","exports","3444680bRTqfm","224268eIAzGM","175994hmJQeT","4MrdTnG","6931544gCUCay","3377930JnXjpa","unwrapExports","22qYyNzc","prototype","__esModule","enumerable","configurable"];return(c=function(){return r})()}!function(r){for(var e=p,t=r();;)try{if(994515===parseInt(e(407))/1+parseInt(e(413))/2*(parseInt(e(423))/3)+parseInt(e(414))/4*(-parseInt(e(411))/5)+parseInt(e(412))/6+-parseInt(e(408))/7*(parseInt(e(415))/8)+-parseInt(e(424))/9+parseInt(e(416))/10*(parseInt(e(418))/11))break;t.push(t.shift())}catch(r){t.push(t.shift())}}(c);var f=n[u(426)](function(r){var e=u;function t(r,e){for(var t=p,n=0;n<e[t(425)];n++){var o=e[n];o[t(421)]=o.enumerable||!1,o[t(422)]=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,o[t(409)],o)}}r.exports=function(r,e,n){var o=p;return e&&t(r[o(419)],e),n&&t(r,n),Object.defineProperty(r,o(419),{writable:!1}),r},r.exports[e(420)]=!0,r[e(410)].default=r[e(410)]});function p(r,e){var t=c();return(p=function(r,e){return t[r-=407]})(r,e)}var d=n[u(417)](f);function v(){var r=["2MQzvHH","10893MlHqDr","function","__esModule","193898dlYNxS","24550196GReYbr","413TxMcna","unwrapExports","2212540PjkTvz","iterator","exports","48wiZrok","symbol","createCommonjsModule","constructor","5IbFYBx","default","584811QYOXZL","1721052JJYgcS","66210OqDzkt","prototype"];return(v=function(){return r})()}var h=l;function l(r,e){var t=v();return(l=function(r,e){return t[r-=385]})(r,e)}!function(r){for(var e=l,t=r();;)try{if(341851===-parseInt(e(403))/1+-parseInt(e(399))/2*(parseInt(e(400))/3)+parseInt(e(396))/4*(-parseInt(e(393))/5)+-parseInt(e(397))/6*(parseInt(e(405))/7)+parseInt(e(389))/8*(-parseInt(e(395))/9)+-parseInt(e(386))/10+parseInt(e(404))/11)break;t.push(t.shift())}catch(r){t.push(t.shift())}}(v);var I=n[h(391)](function(r){var e=h;function t(e){var n=l;return r[n(388)]=t=n(401)==typeof Symbol&&n(390)==typeof Symbol[n(387)]?function(r){return typeof r}:function(r){var e=n;return r&&e(401)==typeof Symbol&&r[e(392)]===Symbol&&r!==Symbol[e(398)]?e(390):typeof r},r.exports.__esModule=!0,r[n(388)].default=r[n(388)],t(e)}r.exports=t,r[e(388)][e(402)]=!0,r[e(388)][e(394)]=r.exports}),b=n[h(385)](I);function y(r,e){var t=g();return(y=function(r,e){return t[r-=377]})(r,e)}var m=y;function g(){var r=["92898NZKlFX","17EoSmhr","this hasn't been initialised - super() hasn't been called","default","630620MwwzXj","11gyIOPg","exports","110IDGTDr","12706VnCVdb","unwrapExports","27276gVWaZx","8UvGeyw","3274754bYxyJx","44EaPyBH","7566348VurLXa","__esModule","2675514ZcjvMm"];return(g=function(){return r})()}!function(r){for(var e=y,t=r();;)try{if(287805===parseInt(e(381))/1*(-parseInt(e(388))/2)+parseInt(e(390))/3*(parseInt(e(393))/4)+parseInt(e(384))/5+parseInt(e(379))/6+-parseInt(e(392))/7*(-parseInt(e(391))/8)+-parseInt(e(380))/9*(parseInt(e(387))/10)+parseInt(e(385))/11*(-parseInt(e(377))/12))break;t.push(t.shift())}catch(r){t.push(t.shift())}}(g);var k=t(function(r){var e=y;r[e(386)]=function(r){if(void 0===r)throw new ReferenceError(y(382));return r},r[e(386)][e(378)]=!0,r[e(386)][e(383)]=r[e(386)]});function w(r,e){var t=E();return(w=function(r,e){return t[r-=312]})(r,e)}n[m(389)](k);var R=w;function E(){var r=["4fgQnBW","37907958ukthVN","Derived constructors may only return object or undefined","26JYrpnl","default","exports","189qwzpsv","9704694FflynJ","15098000iWcnCL","function","__esModule","object","870612IyGATi","18068lFlyEp","9344754awVqYP","6856hkZZtb","5UEMBWY","unwrapExports"];return(E=function(){return r})()}!function(r){for(var e=w,t=r();;)try{if(809008===parseInt(e(315))/1*(-parseInt(e(323))/2)+-parseInt(e(314))/3*(parseInt(e(320))/4)+parseInt(e(318))/5*(-parseInt(e(327))/6)+parseInt(e(326))/7*(-parseInt(e(317))/8)+parseInt(e(316))/9+-parseInt(e(328))/10+parseInt(e(321))/11)break;t.push(t.shift())}catch(r){t.push(t.shift())}}(E);var _=t(function(r){var e=w,t=I[e(324)];r[e(325)]=function(r,n){var o=e;if(n&&(t(n)===o(313)||typeof n===o(329)))return n;if(void 0!==n)throw new TypeError(o(322));return k(r)},r[e(325)][e(312)]=!0,r[e(325)][e(324)]=r[e(325)]}),x=n[R(319)](_);function M(r,e){var t=j();return(M=function(r,e){return t[r-=394]})(r,e)}!function(r){for(var e=M,t=r();;)try{if(561420===-parseInt(e(400))/1+parseInt(e(399))/2+parseInt(e(395))/3+parseInt(e(407))/4+parseInt(e(408))/5+-parseInt(e(402))/6+parseInt(e(396))/7*(parseInt(e(397))/8))break;t.push(t.shift())}catch(r){t.push(t.shift())}}(j);var A=e(t(function(r){var e=M;function t(e){var n=M;return r[n(404)]=t=Object[n(398)]?Object[n(405)][n(403)]():function(r){var e=n;return r[e(401)]||Object[e(405)](r)},r[n(404)][n(406)]=!0,r[n(404)][n(394)]=r[n(404)],t(e)}r.exports=t,r[e(404)][e(406)]=!0,r[e(404)][e(394)]=r.exports}));function j(){var r=["1967UdLEnC","7376zuHcoJ","setPrototypeOf","1790930aXCrwQ","558779MEQhOQ","__proto__","4077006uzGSFw","bind","exports","getPrototypeOf","__esModule","968iTnyCk","891575hOgjfc","default","1399788GyptmR"];return(j=function(){return r})()}var T=S;!function(r){for(var e=S,t=r();;)try{if(877491===parseInt(e(245))/1*(parseInt(e(247))/2)+-parseInt(e(242))/3+-parseInt(e(258))/4+-parseInt(e(255))/5*(parseInt(e(243))/6)+parseInt(e(256))/7*(-parseInt(e(260))/8)+parseInt(e(248))/9*(parseInt(e(259))/10)+parseInt(e(253))/11*(parseInt(e(254))/12))break;t.push(t.shift())}catch(r){t.push(t.shift())}}(N);var O=n[T(244)](function(r){var e=T;function t(e,n){var o=S;return r[o(257)]=t=Object[o(252)]?Object[o(252)][o(250)]():function(r,e){return r.__proto__=e,r},r[o(257)][o(246)]=!0,r[o(257)][o(251)]=r[o(257)],t(e,n)}r[e(257)]=t,r.exports[e(246)]=!0,r[e(257)][e(251)]=r.exports});function S(r,e){var t=N();return(S=function(r,e){return t[r-=242]})(r,e)}function N(){var r=["36RkmgRl","872100wpmdxd","7ezCqOm","exports","2506572QPNrGo","1127330wxBtrT","11639800BbqFeU","141645krBzBR","12wLOciZ","createCommonjsModule","909049sQgZWi","__esModule","2mtvaRv","9frpKAr","unwrapExports","bind","default","setPrototypeOf","8555734iEbXSb"];return(N=function(){return r})()}n[T(249)](O);var F=G;function G(r,e){var t=W();return(G=function(r,e){return t[r-=422]})(r,e)}function W(){var r=["192992sDLbJj","978740GqQbgq","7217190gelQPn","createCommonjsModule","160800JrSgWj","225644peSACr","defineProperty","8QPUiqU","exports","685szmpSA","prototype","22LHhbrk","create","24966SdDpXU","__esModule","12ZHNUHc","2612925kEtxQS","function","Super expression must either be null or a function"];return(W=function(){return r})()}!function(r){for(var e=G,t=r();;)try{if(464708===-parseInt(e(440))/1+parseInt(e(425))/2+parseInt(e(436))/3*(-parseInt(e(426))/4)+-parseInt(e(430))/5*(-parseInt(e(434))/6)+-parseInt(e(437))/7+parseInt(e(428))/8*(parseInt(e(423))/9)+-parseInt(e(422))/10*(parseInt(e(432))/11))break;t.push(t.shift())}catch(r){t.push(t.shift())}}(W);var P=e(n[F(424)](function(r){var e=F;r[e(429)]=function(r,e){var t=G;if(typeof e!==t(438)&&null!==e)throw new TypeError(t(439));r[t(431)]=Object[t(433)](e&&e[t(431)],{constructor:{value:r,writable:!0,configurable:!0}}),Object[t(427)](r,t(431),{writable:!1}),e&&O(r,e)},r[e(429)][e(435)]=!0,r[e(429)].default=r.exports}));function J(r,e){var t=L();return(J=function(r,e){return t[r-=398]})(r,e)}!function(r){for(var e=J,t=r();;)try{if(252516===-parseInt(e(404))/1*(-parseInt(e(413))/2)+parseInt(e(398))/3*(parseInt(e(414))/4)+-parseInt(e(416))/5*(parseInt(e(403))/6)+-parseInt(e(412))/7*(-parseInt(e(408))/8)+parseInt(e(419))/9*(-parseInt(e(409))/10)+-parseInt(e(411))/11*(parseInt(e(417))/12)+-parseInt(e(405))/13)break;t.push(t.shift())}catch(r){t.push(t.shift())}}(L);var C,D=d(function r(){s(this,r)},[{key:"on",value:function(r,e,t){var n=J,o=this.e||(this.e={});return(o[r]||(o[r]=[]))[n(418)]({fn:e,ctx:t}),this}},{key:(C=J)(415),value:function(r,e,t){var n=this;function o(){var a=J;n[a(401)](r,o);for(var i=arguments[a(402)],s=new Array(i),u=0;u<i;u++)s[u]=arguments[u];e[a(399)](t,s)}return o._=e,this.on(r,o,t)}},{key:C(400),value:function(r){for(var e=C,t=((this.e||(this.e={}))[r]||[]).slice(),n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];for(var i=0;i<t[e(402)];i+=1)t[i].fn[e(399)](t[i][e(406)],o);return this}},{key:"off",value:function(r,e){var t=C,n=this.e||(this.e={});if(!r)return Object[t(410)](n)[t(407)](function(r){delete n[r]}),void delete this.e;var o=n[r],a=[];if(o&&e)for(var i=0,s=o[t(402)];i<s;i+=1)o[i].fn!==e&&o[i].fn._!==e&&a[t(418)](o[i]);return a[t(402)]?n[r]=a:delete n[r],this}}]);function L(){var r=["43146FOTqJO","apply","emit","off","length","1439778UrDcpA","302288iTNUSi","562172ioFAkQ","ctx","forEach","18296jfcFNb","59970CJsLLP","keys","1226841jlwXbA","539wWoWcO","2GWsvjn","92lAUAjA","once","5dDbEmF","12YZHuNs","push","243BcuUxX"];return(L=function(){return r})()}var U=X;!function(r){for(var e=X,t=r();;)try{if(365874===parseInt(e(335))/1+-parseInt(e(338))/2+-parseInt(e(342))/3*(parseInt(e(347))/4)+parseInt(e(340))/5+-parseInt(e(341))/6+parseInt(e(325))/7+-parseInt(e(336))/8*(-parseInt(e(330))/9))break;t.push(t.shift())}catch(r){t.push(t.shift())}}(Z);var q={debug:"debug",warn:U(343)},z={debug:!1,debugLevel:q[U(343)],debugUuid:"",decoder:U(346)},Q={init:U(345),startRecord:U(348),stopRecord:U(339),videoFrame:U(334),audioFrame:U(328),destroy:U(332)};function X(r,e){var t=Z();return(X=function(r,e){return t[r-=324]})(r,e)}function Z(){var r=["9BrYXnR","recordingTimestamp","destroy","startRecordSuccess","videoFrame","592232QiOzVh","2539952yUqIRn","load","697892yAxtPt","stopRecord","1102815CcRSlc","2971590lnfgir","17883fntLgu","warn","recordEnd","init","jessibuca-pro-mp4-recorder-decoder.js","212DPkoZL","startRecord","recordTimestamp","2770103ZNOeKW","stopRecordError","destroyEnd","audioFrame","startRecordError"];return(Z=function(){return r})()}var B={init:U(345),startRecordError:"startRecordError",startRecordSuccess:"startRecordSuccess",recordEnd:U(344),stopRecordError:U(326),recordTimestamp:U(324),destroyEnd:U(327)},H={load:U(337),workerError:"workerError",startRecordSuccess:U(333),startRecordError:U(329),stopRecordError:"stopRecordError",recordEnd:U(344),recordingTimestamp:U(331)};function V(r){return null==r}function Y(r,e){var t=K();return(Y=function(r,e){return t[r-=146]})(r,e)}function K(){var r=["237710bqtCAb","1293786DkFhOC","133348wMmRoy","4446340ILkYXA","object","1mGhlFK","10790UrvpJl","3gstkvd","1296911tgNPvj","444372oyWwMb","stringify","true","8NVREdG"];return(K=function(){return r})()}function $(){return function(r){var e=Y,t="";if(b(r)===e(157))try{t=JSON[e(150)](r),t=JSON.parse(t)}catch(e){t=r}else t=r;return t}(z)}function rr(r){return!0!==r&&r!==Y(151)}function er(){var r=["17335428KRsaCH","1467950kwNgvc","134ECRMia","debugUuid","5821wSMwdi","debug","110XHHpnV","JbPro","concat","417EgCeuJ","27419mvGjHg","_opt","5128eOzhqd","warn","[❌❌❌][wasmMp4Recorder][","536WckZHq","5173650ongNcr","length","debugLevel","error","log","204762fhYyFO"];return(er=function(){return r})()}function tr(r,e){var t=er();return(tr=function(r,e){return t[r-=439]})(r,e)}!function(r){for(var e=Y,t=r();;)try{if(124905===parseInt(e(158))/1*(parseInt(e(153))/2)+-parseInt(e(147))/3*(parseInt(e(155))/4)+-parseInt(e(146))/5+-parseInt(e(149))/6+parseInt(e(148))/7*(-parseInt(e(152))/8)+-parseInt(e(154))/9+parseInt(e(156))/10)break;t.push(t.shift())}catch(r){t.push(t.shift())}}(K),function(r){for(var e=tr,t=r();;)try{if(409275===parseInt(e(459))/1*(parseInt(e(457))/2)+parseInt(e(442))/3*(parseInt(e(445))/4)+parseInt(e(439))/5*(-parseInt(e(454))/6)+-parseInt(e(443))/7*(parseInt(e(448))/8)+-parseInt(e(449))/9+-parseInt(e(456))/10+parseInt(e(455))/11)break;t.push(t.shift())}catch(r){t.push(t.shift())}}(er);var nr=d(function r(e){var t=tr;s(this,r),this.log=function(r){var t=tr;if(e[t(444)][t(460)]&&e[t(444)][t(451)]==q.debug){for(var n,o=e[t(444)][t(458)]?"[".concat(e[t(444)][t(458)],"]"):"",a=arguments.length,i=new Array(a>1?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];(n=console).log.apply(n,[t(440)[t(441)](o,"[✅✅✅][wasmMp4Recorder][")[t(441)](r,"]")][t(441)](i))}},this[t(446)]=function(r){var n=t;if(e[n(444)][n(460)]&&(e[n(444)][n(451)]==q[n(460)]||e[n(444)].debugLevel==q[n(446)])){for(var o,a=e[n(444)].debugUuid?"["[n(441)](e[n(444)][n(458)],"]"):"",i=arguments[n(450)],s=new Array(i>1?i-1:0),u=1;u<i;u++)s[u-1]=arguments[u];(o=console)[n(453)].apply(o,["JbPro"[n(441)](a,"[❗❗❗][wasmMp4Recorder][")[n(441)](r,"]")].concat(s))}},this[t(452)]=function(r){for(var n,o=t,a=e._opt.debugUuid?"["[o(441)](e[o(444)][o(458)],"]"):"",i=arguments[o(450)],s=new Array(i>1?i-1:0),u=1;u<i;u++)s[u-1]=arguments[u];(n=console)[o(452)].apply(n,[o(440)[o(441)](a,o(447)).concat(r,"]")][o(441)](s))}});function or(r,e){var t=ar();return(or=function(r,e){return t[r-=288]})(r,e)}function ar(){var r=["465968PDAPex","recordEnd","1138850zJTVqV","data","7755HbYsHy","mp4Recorder","workerError","load","buffer","call","decoderWorker","audioFrame","277593rGKAoe","655900MjGqfE","startRecord","stopRecord","emit","_opt","6TaWyOu","2990raEErx","sendAudioFrame","3166996XuFhfm","_initDecoderWorker","debug","buildTime","constructor","onmessageerror","destroy","recordingTimestamp","cmd","debugUuid","debugError","off","sendVideoFrame","apply","_initWorker","onmessageerror:","init","onerror","postMessage","debugLog","onmessage","startRecordError","construct","recordTimestamp","TAG_NAME","54UnKVnu","onmessage:","8hIDwKv","160452zlzeik","prototype"];return(ar=function(){return r})()}function ir(){var r=or;try{var e=!Boolean[r(310)].valueOf[r(320)](Reflect[r(303)](Boolean,[],function(){}))}catch(r){}return(ir=function(){return!!e})()}!function(r){for(var e=or,t=r();;)try{if(320304===-parseInt(e(323))/1+-parseInt(e(324))/2+parseInt(e(309))/3*(parseInt(e(308))/4)+-parseInt(e(313))/5*(-parseInt(e(329))/6)+parseInt(e(332))/7+-parseInt(e(311))/8*(-parseInt(e(306))/9)+parseInt(e(330))/10*(-parseInt(e(315))/11))break;t.push(t.shift())}catch(r){t.push(t.shift())}}(ar);var sr=function(r){var e=or;function t(r){var e,n,o,a,i,u=or;s(this,t),n=this,i=or,o=A(o=t),(e=x(n,ir()?Reflect[i(303)](o,a||[],A(n)[i(336)]):o[i(294)](n,a)))[u(316)]=r,e[u(305)]="DecoderWorker";var c=r[u(328)].decoder;return e[u(321)]=new Worker(c),e._initDecoderWorker(),r[u(300)](e[u(305)],u(297)),e}return P(t,r),d(t,[{key:e(338),value:function(){var r=e;this[r(292)](),this[r(321)]&&(this.decoderWorker.postMessage({cmd:Q[r(338)]}),this.decoderWorker[r(301)]=null,this[r(321)].onerror=null,this[r(321)][r(337)]=null,this[r(321)].terminate(),this[r(321)]=null),this[r(316)].debugLog(this[r(305)],"destroy")}},{key:e(333),value:function(){var r=e,t=this;this[r(316)].debug,this[r(321)][r(298)]=function(e){var n=r;t[n(316)].debugError(t[n(305)],"onerror:",e),t[n(327)](H[n(317)],e)},this[r(321)][r(337)]=function(e){var n=r;t[n(316)][n(291)](t.TAG_NAME,n(296),e)},this[r(321)][r(301)]=function(e){var n=r,o=e[n(314)];switch(o[n(289)]){case B.init:t[n(316)][n(300)](t[n(305)],n(307),B[n(297)]),t[n(321)]&&t[n(295)](),t[n(327)](H[n(318)]);break;case B[n(302)]:t.emit(H.startRecordError);break;case B.startRecordSuccess:t[n(327)](H.startRecordSuccess);break;case B.stopRecordError:t[n(327)](H.stopRecordError);break;case B[n(312)]:t[n(327)](H[n(312)],o[n(314)]);break;case B[n(304)]:t.emit(H[n(288)],o.msg)}}}},{key:"_initWorker",value:function(){var r=e,t={debug:this[r(316)][r(328)][r(334)],debugLevel:this[r(316)][r(328)].debugLevel,debugUuid:this[r(316)][r(328)][r(290)]};this.decoderWorker[r(299)]({cmd:Q[r(297)],opt:JSON.stringify(t)})}},{key:e(293),value:function(r,t,n,o){var a=e;this[a(321)][a(299)]({cmd:Q.videoFrame,data:r,isIFrame:t,dts:n,pts:o},[r.buffer])}},{key:e(331),value:function(r,t){var n=e;this.decoderWorker[n(299)]({cmd:Q[n(322)],data:r,ts:t},[r[n(319)]])}},{key:e(325),value:function(r){var t=e;this[t(321)][t(299)]({cmd:Q[t(325)],streamInfo:r,buildTime:this.mp4Recorder[t(335)]})}},{key:e(326),value:function(){var r=e;this[r(321)][r(299)]({cmd:Q.stopRecord})}}])}(D),ur=cr;function cr(r,e){var t=fr();return(cr=function(r,e){return t[r-=363]})(r,e)}function fr(){var r=["32XttKnv","debugLog","buffer","destroy","once",'JbProMp4Recorder option "',"type"," and is Trial Version[试用版本]","construct","video height can not be undefined","worker","name","1144935eExNTl","8MhZrkO","height","sampleRate","error","debugWarn","1230asWbxd","startRecordError","concat","audio","Recorder","buildTime","_opt","apply","call","258TqceJR","length","_destroyWorker","extraData","startTimestamp","startRecord","video extraData can not be undefined","recordingTimestamp","now","19101mtUVIY","originalOptions","JbPro wasm mp4 recorder version is ","startRecordSuccess","audio depth can not be undefined","prototype","width","init","depth","audio channels can not be undefined","video type can not be undefined","JessibucaProMp4Recorder","10vjcwKs","stopRecordError","stopRecord","video width can not be undefined","13993WCyqig","sendVideoFrame","3702ZGGuFI","stringify","isRecording is false","audio type can not be undefined","constructor","log","_reset","debug","isRecording","audio extraData can not be undefined","video and audio can not be false at the same time","video","680roOgGR","emit","TAG_NAME","workerError","warn","forEach","664587uFwngz","load","recordEnd","1674912SNNvgb","debugError","channels","sendAudioFrame"];return(fr=function(){return r})()}function pr(){var r=cr;try{var e=!Boolean[r(436)].valueOf[r(421)](Reflect.construct(Boolean,[],function(){}))}catch(r){}return(pr=function(){return!!e})()}!function(r){for(var e=cr,t=r();;)try{if(145589===-parseInt(e(413))/1*(-parseInt(e(422))/2)+-parseInt(e(431))/3*(parseInt(e(395))/4)+-parseInt(e(382))/5*(-parseInt(e(370))/6)+-parseInt(e(368))/7*(-parseInt(e(408))/8)+parseInt(e(407))/9*(-parseInt(e(364))/10)+-parseInt(e(388))/11+parseInt(e(391))/12)break;t.push(t.shift())}catch(r){t.push(t.shift())}}(fr);var dr=function(r){var e=cr;function t(){var r,e,n,o,a,i=cr,u=arguments[i(423)]>0&&void 0!==arguments[0]?arguments[0]:{};s(this,t),e=this,a=cr,n=A(n=t),(r=x(e,pr()?Reflect[a(403)](n,o||[],A(e)[a(374)]):n[a(420)](e,o)))[i(419)]={},Object.keys(u)[i(387)](function(r){var e=i;if(void 0===u[r])throw new Error(e(400)[e(415)](r,'" can not be undefined'))}),r[i(432)]=u;var c=$(),f=Object.assign({},c,u);return r[i(419)]=f,r.isRecording=!1,r[i(418)]=f[i(406)]+"-"+f[i(418)],r[i(377)]=new nr(r),r[i(405)]=null,r.startTimestamp=null,r.TAG_NAME=i(417),r.debugLog(r[i(384)],i(438),JSON.stringify(r[i(419)])),console[i(375)](i(433)[i(415)](u[i(418)],":")[i(415)]('"1.0.0"',i(402))),r}return P(t,r),d(t,[{key:"destroy",value:function(){var r=cr;this._reset(),this[r(424)]()}},{key:e(376),value:function(){var r=e;this.isRecording=!1,this[r(426)]=null}},{key:"_destroyWorker",value:function(){var r=e;this.worker&&(this.worker[r(398)](),this[r(405)]=null)}},{key:"startRecord",value:function(){var r=e,t=this,n=arguments[r(423)]>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(e,o){var a=r;t.debugLog(t.TAG_NAME,a(427),JSON[a(371)](n));var i=!!n.audio,s=!!n[a(381)];if(rr(s)&&rr(i))return t.debugError(t[a(384)],a(380)),void o("video and audio can not be false at the same time");if(i){if(V(n[a(416)][a(401)]))return t.debugError(t.TAG_NAME,a(373)),void o(a(373));if(V(n.audio[a(425)]))return t[a(392)](t[a(384)],a(379)),void o(a(379));if(V(n[a(416)][a(410)]))return t[a(392)](t.TAG_NAME,a(379)),void o("audio extraData can not be undefined");if(V(n.audio[a(393)]))return t.debugError(t[a(384)],a(440)),void o(a(440));if(V(n.audio[a(439)]))return t[a(392)](t[a(384)],a(435)),void o("audio depth can not be undefined")}if(s){if(V(n[a(381)][a(401)]))return t[a(392)](t[a(384)],"video type can not be undefined"),void o(a(441));if(V(n.video[a(425)]))return t.debugError(t[a(384)],a(428)),void o(a(428));if(V(n[a(381)][a(437)]))return t[a(392)](t[a(384)],"video width can not be undefined"),void o(a(367));if(V(n.video[a(409)]))return t[a(392)](t.TAG_NAME,a(404)),void o(a(404))}t[a(405)]?t._startRecord(n,e,o):(t[a(405)]=new sr(t),t[a(405)][a(399)](H[a(389)],function(){var r=a;t._startRecord(n,e,o),t[r(426)]=Date[r(430)]()}),t[a(405)][a(399)](H[a(385)],function(r){o(r)}),t.worker.on(H[a(429)],function(r){var e=a;t[e(383)](H[e(429)],r)}))})}},{key:"_startRecord",value:function(){var r=e,t=this,n=arguments[r(423)]>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments[r(423)]>1?arguments[1]:void 0,a=arguments[r(423)]>2?arguments[2]:void 0;this.worker[r(427)](n),this.worker.once(H[r(414)],function(e){var n=r;t[n(392)](t.TAG_NAME,n(414),e),a(e)}),this[r(405)][r(399)](H[r(434)],function(){var e=r;t.isRecording=!0,t[e(396)](t[e(384)],e(434)),o()})}},{key:e(366),value:function(){var r=this;return new Promise(function(e,t){var n=cr;r[n(396)](r[n(384)],n(366)),rr(r[n(378)])&&(r[n(424)](),r[n(392)](r[n(384)],"isRecording is false"),t(n(372))),r.isRecording=!1,r[n(405)].stopRecord(),r[n(405)].once(H[n(365)],function(e){var o=n;r[o(424)](),r[o(392)](r[o(384)],o(365),e),t(e)}),r[n(405)].once(H.recordEnd,function(t){var o=n;r[o(424)](),r[o(396)](r.TAG_NAME,o(390));var a=new Blob([t[o(397)]],{type:"video/mp4"});e(a)})})}},{key:e(369),value:function(r,t,n,o){var a=e;if(this.isRecording&&this[a(405)]){if(Date[a(430)]()-this[a(426)]>6e5)return;var i=n+o;this.worker[a(369)](r,t,n,i)}}},{key:e(394),value:function(r,t){var n=e;if(this.isRecording&&this.worker){if(Date.now()-this[n(426)]>6e5)return;this.worker.sendAudioFrame(r,t)}}},{key:e(396),value:function(r){var t=e;if(this[t(419)][t(377)]&&this[t(377)]){for(var n,o=arguments[t(423)],a=new Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];(n=this.debug)[t(375)].apply(n,[r][t(415)](a))}}},{key:e(412),value:function(r){var t=e;if(this[t(419)][t(377)]&&this[t(377)]){for(var n,o=arguments.length,a=new Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];(n=this.debug)[t(386)][t(420)](n,[r][t(415)](a))}}},{key:e(392),value:function(r){var t=e;if(this.debug){for(var n,o=arguments.length,a=new Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];(n=this[t(377)])[t(411)][t(420)](n,[r][t(415)](a))}}}])}(D);window[ur(363)]=dr});
